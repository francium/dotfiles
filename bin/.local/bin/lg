#!/bin/bash

pushd . > /dev/null

if [ ! -e ~/wiki/logs ]; then
    mkdir -p ~/wiki/logs
fi
cd ~/wiki/

filename=logs/`date +%Y-%m-%d`.md
if [ ! -e $filename ]; then
    echo -e "# `date '+%A, %B %d %Y'`\n\n\n" > $filename
fi
nvim $filename

git add .
git commit --allow-empty-message -m ""
if [ $? == 0 ]; then
    git pull origin master
    git push origin master
fi

popd > /dev/null
