#!/bin/bash
set -euo pipefail
IFS=$'\n\t'


SESSION_NAME="mediator"
WD1=~/code/mediator-ui
WD2=~/code/mediator-ui-wt-2
WD3=~/code/mediator-ui-wt-3
WD4=~/code/mediator-ui-wt-4

# Note: tmux panes appear to take on id based on their index, from top-left (0)
# to bottom-right (n, where n is the number of panes in the current window)
#   0   1   2
#   3   4   5

# Create a new session and set it's pwd
#   - Split top (single pane) vertically giving the new pane above it a height
#   of 40% relative to it
#   - Split top pane, giving new pane below it a height of 80% relative to it
#   - Select the bottom most pane
tmux new-session -c $WD1 -s $SESSION_NAME -n "wt-1" \; \
    split-window -c $WD1 -t 0 -b -v -p 40\; \
    split-window -c $WD1 -t 0 -v -p 80 \; \
    select-pane -t 2 \; \
    \
    new-window -c $WD2 -n "wt-2" \; \
    split-window -c $WD2 -t 0 -b -v -p 40 \; \
    split-window -c $WD2 -t 0 -v -p 80 \; \
    select-pane -t 2 \; \
    \
    new-window -c $WD3 -n "wt-3" \; \
    split-window -c $WD3 -t 0 -b -v -p 40 \; \
    split-window -c $WD3 -t 0 -v -p 80 \; \
    select-pane -t 2 \; \
    \
    new-window -c $WD4 -n "wt-4" \; \
    split-window -c $WD4 -t 0 -b -v -p 40 \; \
    split-window -c $WD4 -t 0 -v -p 80 \; \
    select-pane -t 2 \; \
